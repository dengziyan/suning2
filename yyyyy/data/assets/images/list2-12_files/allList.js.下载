function Swipe(n,t){"use strict";function e(){w=x.children,p=w.length,w.length<2&&(t.continuous=!1),f.transitions&&t.continuous&&w.length<3&&(x.appendChild(w[0].cloneNode(!0)),x.appendChild(x.children[1].cloneNode(!0)),w=x.children),E=new Array(w.length),m=n.getBoundingClientRect().width||n.offsetWidth,x.style.width=w.length*m+"px";for(var e=w.length;e--;){var i=w[e];i.style.width=m+"px",i.setAttribute("data-index",e),f.transitions&&(i.style.left=e*-m+"px",a(e,g>e?-m:e>g?m:0,0))}t.continuous&&f.transitions&&(a(s(g-1),-m,0),a(s(g+1),m,0)),f.transitions||(x.style.left=g*-m+"px"),n.style.visibility="visible"}function i(){t.continuous?r(g-1):g&&r(g-1)}function o(){t.continuous?r(g+1):g<w.length-1&&r(g+1)}function s(n){return(w.length+n%w.length)%w.length}function r(n,e){if(g!=n){if(f.transitions){var i=Math.abs(g-n)/(g-n);if(t.continuous){var o=i;i=-E[s(n)]/m,i!==o&&(n=-i*w.length+n)}for(var r=Math.abs(g-n)-1;r--;)a(s((n>g?n:g)-r-1),m*i,0);n=s(n),a(g,m*i,e||b),a(n,0,e||b),t.continuous&&a(s(n-i),-(m*i),0)}else n=s(n),c(g*-m,n*-m,e||b);g=n,h(t.callback&&t.callback(g,w[g]))}}function a(n,t,e){u(n,t,e),E[n]=t}function u(n,t,e){var i=w[n],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=e+"ms",o.webkitTransform="translate3d("+t+"px, 0, 0)",o.msTransform=o.MozTransform=o.OTransform="translateX("+t+"px)")}function c(n,e,i){if(!i)return void(x.style.left=e+"px");var o=+new Date,s=setInterval(function(){var r=+new Date-o;return r>i?(x.style.left=e+"px",L&&d(),t.transitionEnd&&t.transitionEnd.call(event,g,w[g]),void clearInterval(s)):void(x.style.left=(e-n)*(Math.floor(r/i*100)/100)+n+"px")},4)}function d(){T=setTimeout(o,L)}function l(){clearTimeout(T)}var v=function(){},h=function(n){setTimeout(n||v,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(n){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e in t)if(void 0!==n.style[t[e]])return!0;return!1}(document.createElement("swipe"))};if(n){var w,E,m,p,x=n.children[0];t=t||{};var g=parseInt(t.startSlide,10)||0,b=t.speed||300;t.continuous=void 0!==t.continuous?t.continuous:!0;var T,y,L=t.auto||0,k={},D={},M={handleEvent:function(n){switch(n.type){case"touchstart":this.start(n);break;case"touchmove":this.move(n);break;case"touchend":h(this.end(n));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":h(this.transitionEnd(n));break;case"resize":h(e)}t.stopPropagation&&n.stopPropagation()},start:function(n){var t=n.touches[0];k={x:t.pageX,y:t.pageY,time:+new Date},y=void 0,D={},x.addEventListener("touchmove",this,!1),x.addEventListener("touchend",this,!1)},move:function(n){if(!(n.touches.length>1||n.scale&&1!==n.scale)){t.disableScroll&&n.preventDefault();var e=n.touches[0];D={x:e.pageX-k.x,y:e.pageY-k.y},"undefined"==typeof y&&(y=!!(y||Math.abs(D.x)<Math.abs(D.y))),y||(n.preventDefault(),l(),t.continuous?(u(s(g-1),D.x+E[s(g-1)],0),u(g,D.x+E[g],0),u(s(g+1),D.x+E[s(g+1)],0)):(D.x=D.x/(!g&&D.x>0||g==w.length-1&&D.x<0?Math.abs(D.x)/m+1:1),u(g-1,D.x+E[g-1],0),u(g,D.x+E[g],0),u(g+1,D.x+E[g+1],0)))}},end:function(n){var e=+new Date-k.time,i=Number(e)<250&&Math.abs(D.x)>20||Math.abs(D.x)>m/2,o=!g&&D.x>0||g==w.length-1&&D.x<0;t.continuous&&(o=!1);var r=D.x<0;y||(i&&!o?(r?(t.continuous?(a(s(g-1),-m,0),a(s(g+2),m,0)):a(g-1,-m,0),a(g,E[g]-m,b),a(s(g+1),E[s(g+1)]-m,b),g=s(g+1)):(t.continuous?(a(s(g+1),m,0),a(s(g-2),-m,0)):a(g+1,m,0),a(g,E[g]+m,b),a(s(g-1),E[s(g-1)]+m,b),g=s(g-1)),t.callback&&t.callback(g,w[g])):t.continuous?(a(s(g-1),-m,b),a(g,0,b),a(s(g+1),m,b)):(a(g-1,-m,b),a(g,0,b),a(g+1,m,b))),x.removeEventListener("touchmove",M,!1),x.removeEventListener("touchend",M,!1)},transitionEnd:function(n){parseInt(n.target.getAttribute("data-index"),10)==g&&(L&&d(),t.transitionEnd&&t.transitionEnd.call(n,g,w[g]))}};e(),L&&d();var z="onorientationchange"in window,S=z?"orientationchange":"resize";return window.addEventListener(S,function(){e()},!1),f.addEventListener?(f.touch&&x.addEventListener("touchstart",M,!1),f.transitions&&(x.addEventListener("webkitTransitionEnd",M,!1),x.addEventListener("msTransitionEnd",M,!1),x.addEventListener("oTransitionEnd",M,!1),x.addEventListener("otransitionend",M,!1),x.addEventListener("transitionend",M,!1)),window.addEventListener("resize",M,!1)):window.onresize=function(){e()},{setup:function(){e()},slide:function(n,t){l(),r(n,t)},prev:function(){l(),i()},next:function(){l(),o()},stop:function(){l()},getPos:function(){return g},getNumSlides:function(){return p},kill:function(){l(),x.style.width="",x.style.left="";for(var n=w.length;n--;){var t=w[n];t.style.width="",t.style.left="",f.transitions&&u(n,0,0)}f.addEventListener?(x.removeEventListener("touchstart",M,!1),x.removeEventListener("webkitTransitionEnd",M,!1),x.removeEventListener("msTransitionEnd",M,!1),x.removeEventListener("oTransitionEnd",M,!1),x.removeEventListener("otransitionend",M,!1),x.removeEventListener("transitionend",M,!1),window.removeEventListener("resize",M,!1)):window.onresize=null}}}}$.fn.Swipe=function(n){return this.each(function(){$(this).data("Swipe",new Swipe($(this)[0],n))})};
;var _header_height=$('.header').height();var currentRight=$('.content .right:eq(0)');var timer=null;var scrollFlag=true;bannerTab(currentRight.find('.channel-banner'));(function(){var custno=$.cookie('custno')||'',chnid=chid||'99999998',clt='wap',devId=$.cookie('_snma')&&$.cookie('_snma').split('|')[1]||'',cityCode=$.cookie('cityCode')||'025';var defaultWordUrl='//'+(requestConfig.ds)+'/ds/terminal/queryDefaultWord/'+custno+'-'+chnid+'-'+clt+'-'+devId+'-'+cityCode+'-getDefaultWord.jsonp';$.ajax({url:defaultWordUrl,dataType:'jsonp',jsonpCallback:'getDefaultWord',success:function(res){if(res.status===200&&res.rs.length){$('.header .right').find('a').text(res.rs[0].word).attr('href','//m.suning.com/search.html?defaultWord='+res.rs[0].word+(chnid!=='99999998'?'&ch='+chnid:''));}else{$('.header .right').find('a').text('搜索商品或店铺').attr('href','//m.suning.com/search.html?defaultWord='+(chnid!=='99999998'?'&ch='+chnid:''));}},error:function(error){$('.header .right').find('a').text('搜索商品或店铺')}})})();$('.content').on('click','.left li',function(){var $this=$(this),_index=$this.index(),_liH=$this.height(),_boxH=$this.parents('.left').height(),_scrollTop=$this.parents('.left').scrollTop();var t1=(_index+1)*_liH-_scrollTop;if(t1>0&&t1<_liH){$this.parents('.left').scrollTop(_index*_liH)}
var t2=(_index+1)*_liH-_scrollTop-_boxH;if(t2>0){$this.parents('.left').scrollTop((_index+1)*_liH-_boxH)}
window.scrollTo(0,0);$(window).trigger('scroll');$this.addClass('on').siblings().removeClass('on');if(!$this.parents('.content').find('.right:eq('+_index+')').hasClass('imgShow')){$this.parents('.content').find('.right:eq('+_index+')').find('.second-module img').forEach(function(item){var imgUrl=$(item).attr('src1');$(item).attr('src',imgUrl);})}
$this.parents('.content').find('.right:eq('+_index+')').css('display','block').addClass('show').siblings('.right').css('display','none');currentRight=$this.parents('.content').find('.right:eq('+_index+')');clearInterval(timer);bannerTab(currentRight.find('.channel-banner'))}).on('click','.right .second-class li',function(){scrollFlag=false;var $this=$(this),_id=$this.attr('data-id'),_height=$this.parents('.fixed-box').height(),current=$this.parents('.right').find('.second-module[data-id="'+_id+'"]');window.scrollTo(0,current.position().top-_header_height-_height);$this.addClass('on').siblings().removeClass('on');animate($this);setTimeout(function(){scrollFlag=true;},50)});$(window).on('scroll',function(){if(scrollFlag){var _top=$(window).scrollTop(),secondClassH=currentRight.find('.fixed-box').height();currentRight.find('.second-class').length&&currentRight.find('.second-module').forEach(function(item,index){if(_top>=($(item).position().top-_header_height-secondClassH-10)){currentRight.find('.second-class li').eq(index).addClass('on').siblings().removeClass('on');animate(currentRight.find('.second-class li').eq(index));}})}});function animate(dom){var $dom=dom;if(!$dom.length){return;}
var offset=$dom.offset();var _offsetLeft=$dom[0].offsetLeft,_offsetWidth=offset.width,_parentWidth=$dom.parents('.second-class').offset().width;var scrollLeft=_offsetLeft+_offsetWidth/2-_parentWidth/2;scrollLeft=scrollLeft<0?0:scrollLeft;$dom.parents('.second-class').scrollLeft(scrollLeft);}
function bannerTab(dom){var _box=$(dom);var _li=_box.find('li').length;_box.parents('.channel').find('.channel-banner-icon').empty();if(_li>1){if(_li===4){_li=2;}
for(var i=0;i<_li;i++){_box.parents('.channel').find('.channel-banner-icon').append('<li></li>');};}
_box.parents('.channel').find('.channel-banner-icon li:first').addClass("on");var mySwiper=new Swipe(_box[0],{speed:400,auto:3000,callback:function(i,l){_box.parents('.channel').find('.channel-banner-icon li').eq(i).addClass("on").siblings().removeClass("on");}});};